<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√°y T√≠nh L√£i Ti·ªÅn G·ª≠i H√†ng Th√°ng</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .main-content {
            padding: 30px;
        }

        .input-section {
            background: #f8f9ff;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 1px solid #e1e8ff;
        }

        .input-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-field {
            display: flex;
            flex-direction: column;
        }

        .form-field label {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .form-field input, .form-field select {
            padding: 12px 15px;
            border: 2px solid #e1e8ff;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
        }

        .form-field input:focus, .form-field select:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .transaction-form {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr auto;
            gap: 15px;
            align-items: end;
            margin-bottom: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(17, 153, 142, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            padding: 8px 12px;
            font-size: 14px;
        }

        .btn-danger:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 10px rgba(255, 107, 107, 0.4);
        }

        .transactions-table {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }

        .table-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            font-size: 1.2em;
            font-weight: 600;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th, .table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #f1f3f4;
        }

        .table th {
            background: #f8f9ff;
            font-weight: 600;
            color: #2c3e50;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .table td {
            color: #34495e;
        }

        .table tbody tr:hover {
            background: #f8f9ff;
            transition: background 0.3s ease;
        }

        .transaction-deposit {
            color: #27ae60;
            font-weight: 600;
        }

        .transaction-withdraw {
            color: #e74c3c;
            font-weight: 600;
        }

        .results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .result-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border: 1px solid #f1f3f4;
            transition: transform 0.3s ease;
        }

        .result-card:hover {
            transform: translateY(-5px);
        }

        .result-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .result-value {
            font-size: 2em;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 10px;
        }

        .result-subtitle {
            color: #7f8c8d;
            font-size: 0.9em;
        }

        .interest-card .result-value {
            color: #27ae60;
        }

        .balance-card .result-value {
            color: #3498db;
        }

        .empty-state {
            text-align: center;
            color: #7f8c8d;
            font-style: italic;
            padding: 40px;
        }

        @media (max-width: 768px) {
            .transaction-form {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .input-group {
                grid-template-columns: 1fr;
            }
            
            .results {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üí∞ M√°y T√≠nh L√£i Ti·ªÅn G·ª≠i</h1>
            <p>T√≠nh to√°n l√£i su·∫•t v√† s·ªë d∆∞ h√†ng th√°ng m·ªôt c√°ch ch√≠nh x√°c</p>
        </div>

        <div class="main-content">
            <!-- Ph·∫ßn nh·∫≠p l√£i su·∫•t -->
            <div class="input-section">
                <h2 style="margin-bottom: 20px; color: #2c3e50;">‚öôÔ∏è C√†i ƒê·∫∑t L√£i Su·∫•t</h2>
                <div class="input-group">
                    <div class="form-field">
                        <label for="interestRate">L√£i su·∫•t nƒÉm (%)</label>
                        <input type="number" id="interestRate" step="0.01" placeholder="V√≠ d·ª•: 6.5" value="6.5">
                    </div>
                    <div class="form-field">
                        <label for="month">Th√°ng t√≠nh to√°n</label>
                        <input type="month" id="month" value="2025-01">
                    </div>
                </div>
            </div>

            <!-- Ph·∫ßn th√™m giao d·ªãch -->
            <div class="input-section">
                <h2 style="margin-bottom: 20px; color: #2c3e50;">üìù Th√™m Giao D·ªãch</h2>
                <div class="transaction-form">
                    <div class="form-field">
                        <label for="transactionDate">Ng√†y</label>
                        <input type="date" id="transactionDate">
                    </div>
                    <div class="form-field">
                        <label for="transactionType">Lo·∫°i giao d·ªãch</label>
                        <select id="transactionType">
                            <option value="deposit">N·ªôp ti·ªÅn</option>
                            <option value="withdraw">R√∫t ti·ªÅn</option>
                        </select>
                    </div>
                    <div class="form-field">
                        <label for="amount">S·ªë ti·ªÅn (VND)</label>
                        <input type="number" id="amount" placeholder="0" min="0">
                    </div>
                    <div class="form-field">
                        <label for="description">M√¥ t·∫£</label>
                        <input type="text" id="description" placeholder="Ghi ch√∫...">
                    </div>
                    <div>
                        <button type="button" class="btn btn-primary" onclick="addTransaction()">Th√™m</button>
                    </div>
                </div>
            </div>

            <!-- B·∫£ng giao d·ªãch -->
            <div class="transactions-table">
                <div class="table-header">
                    üìä Danh S√°ch Giao D·ªãch
                </div>
                <div id="transactionsContainer">
                    <div class="empty-state">
                        Ch∆∞a c√≥ giao d·ªãch n√†o. H√£y th√™m giao d·ªãch ƒë·∫ßu ti√™n!
                    </div>
                </div>
            </div>

            <!-- K·∫øt qu·∫£ t√≠nh to√°n -->
            <div class="results">
                <div class="result-card interest-card">
                    <h3>üí∏ Ti·ªÅn L√£i</h3>
                    <div class="result-value" id="totalInterest">0</div>
                    <div class="result-subtitle">VND</div>
                </div>
                <div class="result-card balance-card">
                    <h3>üí≥ S·ªë D∆∞ Cu·ªëi Th√°ng</h3>
                    <div class="result-value" id="finalBalance">0</div>
                    <div class="result-subtitle">VND</div>
                </div>
                <div class="result-card">
                    <h3>üìà L√£i Su·∫•t Ng√†y</h3>
                    <div class="result-value" id="dailyRate">0</div>
                    <div class="result-subtitle">%</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let transactions = [];

        // Thi·∫øt l·∫≠p ng√†y m·∫∑c ƒë·ªãnh l√† h√¥m nay
        document.getElementById('transactionDate').value = new Date().toISOString().split('T')[0];

        function formatNumber(num) {
            return new Intl.NumberFormat('vi-VN').format(num);
        }

        function addTransaction() {
            const date = document.getElementById('transactionDate').value;
            const type = document.getElementById('transactionType').value;
            const amount = parseFloat(document.getElementById('amount').value) || 0;
            const description = document.getElementById('description').value || '';

            if (!date || amount <= 0) {
                alert('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin giao d·ªãch!');
                return;
            }

            const transaction = {
                id: Date.now(),
                date: date,
                type: type,
                amount: amount,
                description: description
            };

            transactions.push(transaction);
            transactions.sort((a, b) => new Date(a.date) - new Date(b.date));

            // Reset form
            document.getElementById('amount').value = '';
            document.getElementById('description').value = '';

            updateDisplay();
            calculateInterest();
        }

        function removeTransaction(id) {
            transactions = transactions.filter(t => t.id !== id);
            updateDisplay();
            calculateInterest();
        }

        function updateDisplay() {
            const container = document.getElementById('transactionsContainer');
            
            if (transactions.length === 0) {
                container.innerHTML = '<div class="empty-state">Ch∆∞a c√≥ giao d·ªãch n√†o. H√£y th√™m giao d·ªãch ƒë·∫ßu ti√™n!</div>';
                return;
            }

            let html = `
                <table class="table">
                    <thead>
                        <tr>
                            <th>Ng√†y</th>
                            <th>Lo·∫°i giao d·ªãch</th>
                            <th>S·ªë ti·ªÅn</th>
                            <th>M√¥ t·∫£</th>
                            <th>Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            transactions.forEach(transaction => {
                const typeText = transaction.type === 'deposit' ? 'N·ªôp ti·ªÅn' : 'R√∫t ti·ªÅn';
                const typeClass = transaction.type === 'deposit' ? 'transaction-deposit' : 'transaction-withdraw';
                const amountText = transaction.type === 'deposit' ? `+${formatNumber(transaction.amount)}` : `-${formatNumber(transaction.amount)}`;
                
                html += `
                    <tr>
                        <td>${new Date(transaction.date).toLocaleDateString('vi-VN')}</td>
                        <td><span class="${typeClass}">${typeText}</span></td>
                        <td class="${typeClass}">${amountText} VND</td>
                        <td>${transaction.description}</td>
                        <td>
                            <button class="btn btn-danger" onclick="removeTransaction(${transaction.id})">
                                üóëÔ∏è X√≥a
                            </button>
                        </td>
                    </tr>
                `;
            });

            html += '</tbody></table>';
            container.innerHTML = html;
        }

        function calculateInterest() {
            const annualRate = parseFloat(document.getElementById('interestRate').value) || 0;
            const monthInput = document.getElementById('month').value;
            
            if (!monthInput) {
                document.getElementById('totalInterest').textContent = '0';
                document.getElementById('finalBalance').textContent = '0';
                document.getElementById('dailyRate').textContent = '0.0000';
                return;
            }

            const [year, month] = monthInput.split('-').map(Number);
            const daysInMonth = new Date(year, month, 0).getDate();
            const dailyRate = annualRate / 365 / 100;

            // Hi·ªÉn th·ªã l√£i su·∫•t ng√†y
            document.getElementById('dailyRate').textContent = (dailyRate * 100).toFixed(6);

            let totalInterest = 0;
            let currentBalance = 0;

            // T·∫°o danh s√°ch c√°c ng√†y trong th√°ng v·ªõi s·ªë d∆∞
            const dailyBalances = [];
            
            for (let day = 1; day <= daysInMonth; day++) {
                const currentDate = new Date(year, month - 1, day);
                const dateString = currentDate.toISOString().split('T')[0];
                
                // √Åp d·ª•ng c√°c giao d·ªãch trong ng√†y
                const dayTransactions = transactions.filter(t => t.date === dateString);
                dayTransactions.forEach(transaction => {
                    if (transaction.type === 'deposit') {
                        currentBalance += transaction.amount;
                    } else {
                        currentBalance -= transaction.amount;
                    }
                });

                // T√≠nh l√£i cho ng√†y n√†y (ch·ªâ t√≠nh l√£i n·∫øu s·ªë d∆∞ > 0)
                if (currentBalance > 0) {
                    const dayInterest = currentBalance * dailyRate;
                    totalInterest += dayInterest;
                }

                dailyBalances.push({
                    date: dateString,
                    balance: currentBalance,
                    interest: currentBalance > 0 ? currentBalance * dailyRate : 0
                });
            }

            const finalBalance = currentBalance + totalInterest;

            // C·∫≠p nh·∫≠t hi·ªÉn th·ªã
            document.getElementById('totalInterest').textContent = formatNumber(Math.round(totalInterest));
            document.getElementById('finalBalance').textContent = formatNumber(Math.round(finalBalance));
        }

        // T·ª± ƒë·ªông t√≠nh to√°n khi thay ƒë·ªïi l√£i su·∫•t ho·∫∑c th√°ng
        document.getElementById('interestRate').addEventListener('input', calculateInterest);
        document.getElementById('month').addEventListener('change', calculateInterest);

        // T√≠nh to√°n ban ƒë·∫ßu
        calculateInterest();
    </script>
</body>
</html>
